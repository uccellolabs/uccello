(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+lRy":function(t,e){},0:function(t,e,a){a("F/og"),a("XZv6"),t.exports=a("+lRy")},"F/og":function(t,e,a){"use strict";a.r(e);var n=a("ipVs");function i(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,r;return e=t,(a=[{key:"init",value:function(t){this.table=$(t),this.linkManager=new n.a(!1),this.initColumns(),this.initColumnsSortListener(),this.initColumnsVisibilityListener(),this.initRecordsNumberListener(),this.initColumnsSearchListener()}},{key:"initColumns",value:function(){var t=this;this.columns={},this.table&&$("th[data-field]",this.table).each(function(e,a){var n=$(a),i=n.data("field");void 0!==i&&(t.columns[i]={columnName:n.data("column"),search:$(".field-search",n).val()})})}},{key:"makeQuery",value:function(t){var e=this;if(this.table){var a=$(this.table).data("content-url");$("tbody tr.no-results",this.table).hide(),$('.pagination[data-table="'.concat(this.table.attr("id"),'"]')).hide(),$('.loader[data-table="'.concat(this.table.attr("id"),'"]')).removeClass("hide");var n={_token:$('meta[name="csrf-token"]').attr("content"),id:$('meta[name="record"]').attr("content"),columns:this.columns,order:$(this.table).attr("data-order")?JSON.parse($(this.table).attr("data-order")):null,relatedlist:$(this.table).attr("data-relatedlist")?$(this.table).attr("data-relatedlist"):null,length:$(this.table).attr("data-length")};void 0!==t&&(n.page=t),$.post(a,n).then(function(t){e.displayResults(t),e.displayPagination(t),$('.loader[data-table="'.concat(e.table.attr("id"),'"]')).addClass("hide")})}}},{key:"displayResults",value:function(t){if(this.table&&t.data)if($("tbody tr.record",this.table).remove(),0===t.data.length)$("tbody tr.no-results",this.table).show();else{var e=!0,a=!1,n=void 0;try{for(var i,r=t.data[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;this.addRowToTable(o)}}catch(t){a=!0,n=t}finally{try{e||null==r.return||r.return()}finally{if(a)throw n}}}}},{key:"displayPagination",value:function(t){var e=this;if(this.table&&t.data){for(var a=null===t.prev_page_url?"disabled":"waves-effect",n=t.prev_page_url?'data-page="'.concat(t.current_page-1,'"'):"",i='<li class="'.concat(a,'"><a href="javascript:void(0);" ').concat(n,'><i class="material-icons">chevron_left</i></a></li>'),r=1;r<=t.last_page;r++)r===t.current_page?i+='<li class="active primary"><a href="javascript:void(0);">'.concat(r,"</a></li>"):i+='<li class="waves-effect"><a href="javascript:void(0);" data-page="'.concat(r,'">').concat(r,"</a></li>");var o=null===t.next_page_url?"disabled":"waves-effect",l=t.next_page_url?'data-page="'.concat(t.current_page+1,'"'):"";i+='<li class="'.concat(o,'"><a href="javascript:void(0);" ').concat(l,'><i class="material-icons">chevron_right</i></a></li>');var s=$('.pagination[data-table="'.concat(this.table.attr("id"),'"]'));s.html(i),s.show(),$("a[data-page]",s).on("click",function(t){var a=$(t.currentTarget).attr("data-page");e.makeQuery(a)})}}},{key:"addRowToTable",value:function(t){if(this.table&&t){var e=$("tbody tr.template",this.table).clone();$("th[data-field]",this.table).each(function(){var a=$(this).data("field"),n=$('td[data-field="'.concat(a,'"] '),e);n.html(t[a+"_html"]),"none"===$(this).css("display")&&n.hide()}),$("a",e).each(function(){var e=$(this).attr("href");e=e.replace("RECORD_ID",t.id),$(this).attr("href",e),$(this).attr("data-tooltip")&&$(this).tooltip()});var a=$(e).attr("data-row-url");a=a.replace("RECORD_ID",t.id),$(e).attr("data-row-url",a),$(e).on("click",function(){document.location.href=$(this).attr("data-row-url")}),this.linkManager.initClickListener(e),e.removeClass("hide").removeClass("template").addClass("record").appendTo("#".concat(this.table.attr("id")," tbody"))}}},{key:"initColumnsVisibilityListener",value:function(){$('ul.columns[data-table="'.concat(this.table.attr("id"),'"] li a')).on("click",function(t){var e=$(t.currentTarget),a=$(e).data("field"),n=$(e).parents("li:first");n.toggleClass("active"),n.hasClass("active")?($('th[data-field="'.concat(a,'"]')).show(),$('td[data-field="'.concat(a,'"]')).show()):($('th[data-field="'.concat(a,'"]')).hide(),$('td[data-field="'.concat(a,'"]')).hide())})}},{key:"initRecordsNumberListener",value:function(){var t=this;this.table&&$('ul.records-number[data-table="'.concat(this.table.attr("id"),'"] li a')).on("click",function(e){var a=$(e.currentTarget),n=$(a).data("number"),i=$(a).parents("ul:first").attr("id");$('a[data-target="'.concat(i,'"] strong.records-number')).text(n),$(t.table).attr("data-length",n),t.makeQuery()})}},{key:"initColumnsSearchListener",value:function(){if(this.table){this.timer=0;var t=this;$("th[data-field]",this.table).each(function(e,a){var n=$(a),i=n.data("field");$("input",n).on("keyup apply.daterangepicker cancel.daterangepicker",function(){t.launchSearch(i,$(this).val())}),$("select",n).on("change",function(){t.launchSearch(i,$(this).val())})}),this.addClearSearchButtonListener()}}},{key:"launchSearch",value:function(t,e){var a=this;""!==e&&$(".clear-search").show(),this.columns[t].search!==e&&(this.columns[t].search=e,clearTimeout(this.timer),this.timer=setTimeout(function(){a.makeQuery()},700))}},{key:"addClearSearchButtonListener",value:function(){var t=this;this.table&&$(".actions-column .clear-search").on("click",function(e){$(" thead input",t.table).val(""),t.initColumns(),$(e.currentTarget).hide(),t.makeQuery()})}},{key:"initColumnsSortListener",value:function(){var t=this;this.table&&$("th[data-field].sortable",this.table).each(function(e,a){var n=$(a),i=n.data("column");$("a.column-label",n).on("click",function(e){var a=JSON.parse(t.table.attr("data-order"));$("a.column-label i").hide(),null!==a&&"asc"===a[i]?(a[i]="desc",$("a.column-label i",n).removeClass("fa-sort-amount-up").addClass("fa-sort-amount-down")):((a={})[i]="asc",$("a.column-label i",n).removeClass("fa-sort-amount-down").addClass("fa-sort-amount-up")),$("a.column-label i",n).show(),t.table.attr("data-order",JSON.stringify(a)),t.makeQuery()})})}}])&&i(e.prototype,a),r&&i(e,r),t}();function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function s(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initDatatable(),this.initListeners()}var e,a,n;return e=t,(a=[{key:"initDatatable",value:function(){0!=$('table[data-filter-type="list"]').length&&(this.datatable=new r,this.datatable.init($('table[data-filter-type="list"]')),this.datatable.makeQuery())}},{key:"initListeners",value:function(){this.initSaveFilterListener(),this.initDeleteFilterListener(),this.initExportListener()}},{key:"initSaveFilterListener",value:function(){var t=this;$("#addFilterModal a.save").on("click",function(e){var a=$("#add_filter_filter_name").val();""!==a?$("ul#filters-list a[data-name='".concat(a,"']")).length>0?swal(l({title:uctrans("filter.exists.title"),text:uctrans("filter.exists.message"),icon:"warning",buttons:!0,dangerMode:!0},"buttons",[uctrans("button.no"),uctrans("button.yes")])).then(function(e){!0===e&&t.saveFilter()}):t.saveFilter():$("#add_filter_filter_name").parent(".form-line").addClass("focused error")})}},{key:"initDeleteFilterListener",value:function(){var t=this,e=$('table[data-filter-type="list"]');$("a.delete-filter").on("click",function(){var a=$(e).attr("data-filter-id");a&&swal(l({title:uctrans("dialog.confirm.title"),text:uctrans("filter.delete.message"),icon:"warning",buttons:!0,dangerMode:!0},"buttons",[uctrans("button.no"),uctrans("button.yes")])).then(function(e){!0===e&&t.deleteFilter(a)})})}},{key:"initExportListener",value:function(){var t=this;$("#exportModal .export").on("click",function(e){var a=$('table[data-filter-type="list"]'),n=$("#exportModal"),i={_token:$('meta[name="csrf-token"]').attr("content"),extension:$("#export_format",n).val(),columns:t.getVisibleColumns(a),conditions:t.getSearchConditions(a),order:JSON.parse($(a).attr("data-order")),with_hidden_columns:$("#with_hidden_columns",n).is(":checked")?1:0,with_id:$("#export_with_id",n).is(":checked")?1:0,with_conditions:$("#export_keep_conditions",n).is(":checked")?1:0,with_order:$("#export_keep_order",n).is(":checked")?1:0,with_timestamps:$("#export_with_timestamps",n).is(":checked")?1:0},r=a.data("export-url"),o=t.getFakeFormHtml(i,r),l=$(o);$("body").append(l),l.submit(),l.remove()})}},{key:"getVisibleColumns",value:function(t){var e=[];return $("th[data-field]",t).each(function(){var t=$(this).data("field");"none"!==$(this).css("display")&&e.push(t)}),e}},{key:"getSearchConditions",value:function(t){var e=this,a={};return $("th[data-column]",t).each(function(t,n){var i=$(n).data("field");e.datatable.columns[i].search&&(a[i]=e.datatable.columns[i].search)}),a}},{key:"getOrderWithFieldColumn",value:function(t){var e=this.datatable.columns,a={},n=!0,i=!1,r=void 0;try{for(var o,l=t.order()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value;a[e[s[0]-1].db_column]=s[1]}}catch(t){i=!0,r=t}finally{try{n||null==l.return||l.return()}finally{if(i)throw r}}return a}},{key:"saveFilter",value:function(){var t=$('table[data-filter-type="list"]'),e=$("#addFilterModal"),a={_token:$('meta[name="csrf-token"]').attr("content"),name:$("#add_filter_filter_name",e).val(),type:"list",save_order:$("#add_filter_save_order",e).is(":checked")?1:0,save_page_length:$("#add_filter_save_page_length",e).is(":checked")?1:0,columns:this.getVisibleColumns(t),order:JSON.parse($(t).attr("data-order")),page_length:$(t).attr("data-length"),public:$("#add_filter_is_public",e).is(":checked")?1:0,default:$("#add_filter_is_default",e).is(":checked")?1:0},n=this.getSearchConditions(t);a.conditions=n!=={}?{search:n}:null,$.ajax({url:t.data("save-filter-url"),method:"post",data:a,contentType:"application/x-www-form-urlencoded"}).then(function(e){var a={id:e.id,name:e.name};$('a[data-target="filters-list"] span').text(a.name),$(t).attr("data-filter-id",a.id),$("a.delete-filter").parents("li:first").show()}).fail(function(t){swal(uctrans("dialog.error.title"),t.message,"error")})}},{key:"deleteFilter",value:function(t){var e=$('table[data-filter-type="list"]'),a={_token:$('meta[name="csrf-token"]').attr("content"),id:t},n=$(e).data("delete-filter-url");$.post(n,a).then(function(t){t.success?document.location.href=$(e).data("list-url"):swal(uctrans("dialog.error.title"),t.message,"error")}).fail(function(t){swal(uctrans("dialog.error.title"),t.message,"error")})}},{key:"getFakeFormHtml",value:function(t,e){var a="<form style='display: none;' method='POST' action='"+e+"'>";return _.each(t,function(t,e){var n="object"===o(t)?JSON.stringify(t):t;"string"==typeof n&&(n=n.replace("\\","\\\\").replace("'","'")),a+="<input type='hidden' name='"+e+"' value='"+n+"'>"}),a+="</form>"}}])&&s(e.prototype,a),n&&s(e,n),t}();function u(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initListeners()}var e,a,n;return e=t,(a=[{key:"initListeners",value:function(){this.initDeleteCurrentFileListener(),this.initSaveAndNewListener()}},{key:"initDeleteCurrentFileListener",value:function(){$(".current-file .delete-file a").on("click",function(t){t.preventDefault(),$(t.currentTarget).parents(".form-group:first").find(".file-field").removeClass("hide"),$(t.currentTarget).parents(".form-group:first").find(".delete-file-field").val(1),$(t.currentTarget).parents(".current-file:first").remove()})}},{key:"initSaveAndNewListener",value:function(){$(".btn-save-new").on("click",function(){$("input[name='save_new_hdn']").val(1),$("form.edit-form").submit()})}}])&&u(e.prototype,a),n&&u(e,n),t}();function f(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initRelatedLists(),this.initRelatedListSelectionModalListener()}var e,a,n;return e=t,(a=[{key:"initRelatedLists",value:function(){0!=$('table[data-filter-type="related-list"]').length&&$('table[data-filter-type="related-list"]').each(function(t,e){var a=new r;a.init(e),a.makeQuery()})}},{key:"initRelatedListSelectionModalListener",value:function(){var t=this;$(".btn-relatedlist-select").on("click",function(e){var a=e.currentTarget,n=$(a).data("relatedlist"),i=$(a).data("modal-title"),r=$(a).data("modal-icon"),o=$(".selection-modal-content[data-relatedlist='".concat(n,"']")).html(),l=$("#relatedListSelectionModal");$(".modal-title span",l).text(i),$(".modal-title i",l).text(r),$(".modal-body",l).html(o),t.initDatatable($(".dataTable",l),!0),l.modal()})}},{key:"initDatatable",value:function(t,e){var a,n=this,i=$('meta[name="csrf-token"]').attr("content"),o=$('meta[name="domain"]').attr("content"),l=$('meta[name="record"]').attr("content"),s=$(t).data("relatedlist"),c=$(t).data("related-module"),u=$(t).data("url"),d=$(t).data("columns"),f="",h="".concat(u,"?id=").concat(l,"&relatedlist=").concat(s);!0===e?(h+="&action=select",f="javascript:void(0)",a=function(t,e,a){n.relatedListNNRowClickCallback(t,e,a,s)}):f=laroute.route("uccello.detail",{id:"%s",domain:o,module:c});var m=new r;m.url="".concat(h,"&_token=").concat(i),m.domainSlug=o,m.moduleName=c,m.columns=d,m.rowUrl=f,m.rowClickCallback=a,m.init(t)}},{key:"relatedListNNRowClickCallback",value:function(t,e,a,n){var i=$('meta[name="domain"]').attr("content"),r=$('meta[name="module"]').attr("content"),o=$('meta[name="record"]').attr("content"),l=laroute.route("uccello.edit.relation.add",{domain:i,module:r,id:o,relatedlist:n,related_id:a.id});$.get(l).then(function(t){!1===t.success?swal(uctrans("dialog.error.title"),t.message,"error"):($("#relatedListSelectionModal").modal("hide"),$(".relatedlist table[data-relatedlist=".concat(n,"]")).DataTable().draw())})}}])&&f(e.prototype,a),n&&f(e,n),t}(),m=a("SCeu");function v(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lazyLoad(),this.initGlobal()}var e,a,n;return e=t,(a=[{key:"lazyLoad",value:function(){switch($('meta[name="page"]').attr("content")){case"list":new c;break;case"edit":new d;break;case"detail":new h}}},{key:"initGlobal",value:function(){new m.a}}])&&v(e.prototype,a),n&&v(e,n),t}())},SCeu:function(t,e,a){"use strict";var n=a("ipVs");function i(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,n;return e=t,(a=[{key:"show",value:function(t,e,a,n,i,r){e||(e="bg-black"),a||(a="top"),n||(n="right"),i||(i="animated fadeInDown"),r||(r="animated fadeOutUp");$.notify({message:t},{type:e,allow_dismiss:!0,newest_on_top:!0,timer:1e3,placement:{from:a,align:n},animate:{enter:i,exit:r},template:'<div data-notify="container" class="bootstrap-notify-container alert alert-dismissible {0} p-r-35" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">Ã—</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'})}}])&&i(e.prototype,a),n&&i(e,n),t}();function o(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}a.d(e,"a",function(){return l});var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initLinks(),this.initNotifications()}var e,a,i;return e=t,(a=[{key:"initLinks",value:function(){new n.a}},{key:"initNotifications",value:function(){$(".notification-container").each(function(t,e){var a=$(e).html(),n=$(e).data("color"),i=$(e).data("placement"),o=$(e).data("align"),l=$(e).data("animation-enter"),s=$(e).data("animation-exit");(new r).show(a,n,i,o,l,s)})}}])&&o(e.prototype,a),i&&o(e,i),t}()},XZv6:function(t,e){},ipVs:function(t,e,a){"use strict";function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,i;return e=t,(a=[{key:"show",value:function(t,e){console.log(t),swal(t).then(e)}}])&&n(e.prototype,a),i&&n(e,i),t}();function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}a.d(e,"a",function(){return l});var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!1!==e&&this.initListeners()}var e,a,n;return e=t,(a=[{key:"initListeners",value:function(){this.initClickListener()}},{key:"initClickListener",value:function(t){var e=this;void 0===t&&(t=null),$("a[data-config], button[data-config]",t).on("click",function(t){t.preventDefault(),e.element=$(t.currentTarget),e.config=e.element.data("config"),e.element.blur(),null===e.config&&(e.config={}),!0===e.config.confirm?e.confirm():e.launchAction()})}},{key:"launchAction",value:function(){switch(this.config.actionType){case"link":this.gotoUrl();break;case"ajax":this.callUrl();break;case"modal":this.showModal()}}},{key:"gotoUrl",value:function(){var t=this.config.target?this.config.target:"_self";window.open(this.element.attr("href"),t)}},{key:"callUrl",value:function(){var t=this.element.attr("href"),e="object"===r(this.config.ajax)?this.config.ajax:{},a="get";e.method&&(a=e.method);var n={};if(e.params&&(n=e.params),"post"===a){var i=$('meta[name="csrf-token"]').attr("content");n._token=i}var o=null;e.elementToUpdate&&(o=e.elementToUpdate),$.ajax({url:t,method:a,data:n}).then(function(t){o?$(o).html(t.content):!1===t.success?swal(uctrans("dialog.error.title"),t.message,"error"):(swal(uctrans("dialog.success.title"),t.message,"success"),!0===e.refresh&&document.location.reload())}).catch(function(t){swal(uctrans("dialog.error.title"),t.message,"error")})}},{key:"showModal",value:function(){var t=this.config.modal;console.log(t),$(t).modal(),$("input",t).val(""),$(".form-line",t).removeClass("focused").removeClass("error")}},{key:"confirm",value:function(){var t,e,a,n,o,l=this,s=new i;"object"===r(this.config.dialog)&&(t=this.config.dialog.title,e=this.config.dialog.text,a=this.config.dialog.confirmButtonText,n=this.config.dialog.confirmButtonColor,o=this.config.dialog.closeOnConfirm),t||(t=uctrans("dialog.confirm.title")),a||(a=uctrans("button.yes")),n||(n="#DD6B55"),o||(o=!0);var c=!1;"ajax"===this.config.actionType&&(c=!0,this.config.ajax&&this.config.ajax.elementToUpdate||(o=!1)),s.show({title:t,text:e,icon:"warning",showCancelButton:!0,confirmButtonColor:n,confirmButtonText:a,cancelButtonText:uctrans("button.cancel"),closeOnConfirm:o,showLoaderOnConfirm:c},function(){l.launchAction()})}}])&&o(e.prototype,a),n&&o(e,n),t}()}},[[0,0]]]);